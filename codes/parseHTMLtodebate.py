links = ['http://www.presidency.ucsb.edu/ws/index.php?pid=116995', 'http://www.presidency.ucsb.edu/ws/index.php?pid=112719', 'http://www.presidency.ucsb.edu/ws/index.php?pid=112718', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111520', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111471', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111409', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111178', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110910', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110903', 'http://www.presidency.ucsb.edu/ws/index.php?pid=115148', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111711', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111634', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111500', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111472', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111412', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111395', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111177', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110908', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110906', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110756', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110489', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111413', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111394', 'http://www.presidency.ucsb.edu/ws/index.php?pid=111176', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110909', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110907', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110758', 'http://www.presidency.ucsb.edu/ws/index.php?pid=110757', 'http://www.presidency.ucsb.edu/ws/index.php?pid=102344', 'http://www.presidency.ucsb.edu/ws/index.php?pid=102343', 'http://www.presidency.ucsb.edu/ws/index.php?pid=102317', 'http://www.presidency.ucsb.edu/ws/index.php?pid=102322', 'http://www.presidency.ucsb.edu/ws/index.php?pid=99556', 'http://www.presidency.ucsb.edu/ws/index.php?pid=99075', 'http://www.presidency.ucsb.edu/ws/index.php?pid=99001', 'http://www.presidency.ucsb.edu/ws/index.php?pid=98936', 'http://www.presidency.ucsb.edu/ws/index.php?pid=98929', 'http://www.presidency.ucsb.edu/ws/index.php?pid=98814', 'http://www.presidency.ucsb.edu/ws/index.php?pid=98813', 'http://www.presidency.ucsb.edu/ws/index.php?pid=97978', 'http://www.presidency.ucsb.edu/ws/index.php?pid=97703', 'http://www.presidency.ucsb.edu/ws/index.php?pid=97332', 'http://www.presidency.ucsb.edu/ws/index.php?pid=97038', 'http://www.presidency.ucsb.edu/ws/index.php?pid=97022', 'http://www.presidency.ucsb.edu/ws/index.php?pid=96914', 'http://www.presidency.ucsb.edu/ws/index.php?pid=96894', 'http://www.presidency.ucsb.edu/ws/index.php?pid=96795', 'http://www.presidency.ucsb.edu/ws/index.php?pid=96683', 'http://www.presidency.ucsb.edu/ws/index.php?pid=96659', 'http://www.presidency.ucsb.edu/ws/index.php?pid=96660', 'http://www.presidency.ucsb.edu/ws/index.php?pid=90711', 'http://www.presidency.ucsb.edu/ws/index.php?pid=90513', 'http://www.presidency.ucsb.edu/ws/index.php?pid=84526', 'http://www.presidency.ucsb.edu/ws/index.php?pid=84482', 'http://www.presidency.ucsb.edu/ws/index.php?pid=78691', 'http://www.presidency.ucsb.edu/ws/index.php?pid=84382', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76913', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76688', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76563', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76339', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76271', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76237', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76224', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76123', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76122', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76041', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75950', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75796', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76561', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75664', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75631', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75575', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75489', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75140', 'http://www.presidency.ucsb.edu/ws/index.php?pid=74349', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76338', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76300', 'http://www.presidency.ucsb.edu/ws/index.php?pid=62265', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29427', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76223', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29664', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76562', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76069', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75914', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75861', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75913', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75680', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75630', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75171', 'http://www.presidency.ucsb.edu/ws/index.php?pid=74348', 'http://www.presidency.ucsb.edu/ws/index.php?pid=74350', 'http://www.presidency.ucsb.edu/ws/index.php?pid=63163', 'http://www.presidency.ucsb.edu/ws/index.php?pid=72776', 'http://www.presidency.ucsb.edu/ws/index.php?pid=72770', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29428', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75118', 'http://www.presidency.ucsb.edu/ws/index.php?pid=74351', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29420', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29419', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29418', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29421', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105446', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105445', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105444', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105449', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105448', 'http://www.presidency.ucsb.edu/ws/index.php?pid=109919', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105447', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105443', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105442', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105441', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105440', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105439', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105438', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105437', 'http://www.presidency.ucsb.edu/ws/index.php?pid=76120', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75089', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105436', 'http://www.presidency.ucsb.edu/ws/index.php?pid=105435', 'http://www.presidency.ucsb.edu/ws/index.php?pid=75090', 'http://www.presidency.ucsb.edu/ws/index.php?pid=52115', 'http://www.presidency.ucsb.edu/ws/index.php?pid=52060', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29422', 'http://www.presidency.ucsb.edu/ws/index.php?pid=21625', 'http://www.presidency.ucsb.edu/ws/index.php?pid=21617', 'http://www.presidency.ucsb.edu/ws/index.php?pid=21605', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29423', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29412', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29411', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29424', 'http://www.presidency.ucsb.edu/ws/index.php?pid=39296', 'http://www.presidency.ucsb.edu/ws/index.php?pid=39199', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29425', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29408', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29407', 'http://www.presidency.ucsb.edu/ws/index.php?pid=6517', 'http://www.presidency.ucsb.edu/ws/index.php?pid=6414', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29404', 'http://www.presidency.ucsb.edu/ws/index.php?pid=62249', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29403', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29402', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29401', 'http://www.presidency.ucsb.edu/ws/index.php?pid=29400']
link = links[0]

from bs4 import BeautifulSoup

from urllib.request import Request, urlopen

from time import sleep
import os
import re

def getDebate(link):
	content = urlopen(Request(link)).read()
	fname = "/home/bt1/13CS10060/btp/debates/"  + link.split('=')[-1]+".txt"
	print(content, file=open(fname, "w"))
	sleep(1)
	'''soup = bs(content, 'html.parser')
	text = soup.find_all('span','displaytext')
	print(text)'''


def parseDebate(filename, outfile):
	#print(filename)
	content = open(filename,"r").read()
	soup = BeautifulSoup(content, 'html.parser')
	spans = soup.find_all('span', attrs={'class':'displaytext'})
	text = spans[0].text
	text = re.sub(r"[A-Z]+:", "", text)
	text = re.sub(r"\[[a-z]+\]", "", text)
	print(text, file=outfile)



def getallfiles():
	basepath = "/home/bt1/13CS10060/btp/debates/"
	files = os.listdir(basepath)
	outfile = open(basepath+"result.txt", "a")
	for debate in files:
		parseDebate(basepath+debate, outfile)
		

getallfiles()
'''
for link in links:
	getDebate(link)'''
